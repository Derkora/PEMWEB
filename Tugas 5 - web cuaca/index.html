<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather Dashboard</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      .container {
        text-align: center;
        margin-top: 50px;
      }

      .weather-box {
        background-color: #f0f0f0;
        padding: 20px;
        border-radius: 10px;
        margin-top: 20px;
      }
    </style>
  </head>
  <body id="page-top">
    <div class="container">
      <h1>Weather in Surabaya</h1>
      <button onclick="infoCuacaSurabaya()">Get Weather Info</button>
      <div class="weather-box">
        <h3 id="infoKota"></h3>
        <p id="infoDesk"></p>
        <p id="infoAwan"></p>
        <p id="infoSuhu"></p>
        <p id="infoKelembapan"></p>
        <p id="infoTekanan"></p>
        <p id="infoAngin"></p>
      </div>
    </div>

    <script>
      function infoCuacaSurabaya() {
        const datas = new XMLHttpRequest();
        datas.open(
          'GET',
          `https://api.openweathermap.org/data/2.5/weather?q=Surabaya&appid=c347d06fd84b8f14296f082d6b5465a1`,
          true
        );

        datas.onload = function () {
          if (datas.status >= 200 && datas.status < 400) {
            const response = JSON.parse(datas.responseText);

            const kota = response.name;
            const awan = response.clouds.all;
            const suhu = response.main.temp - 273;
            const kelembapan = response.main.humidity;
            const tekanan = response.main.pressure;
            const angin = response.wind.speed;
            const deskripsi = response.weather[0].description;

            console.log(response);
            document.getElementById('infoKota').innerHTML = `City: ${kota}`;
            document.getElementById('infoDesk').innerHTML = `Weather: ${deskripsi}`;
            document.getElementById('infoAwan').innerHTML = `Clouds: ${awan}%`;
            document.getElementById('infoSuhu').innerHTML = `Temperature: ${suhu}Â°C`;
            document.getElementById('infoKelembapan').innerHTML = `Humidity: ${kelembapan}%`;
            document.getElementById('infoTekanan').innerHTML = `Pressure: ${tekanan} hPa`;
            document.getElementById('infoAngin').innerHTML = `Wind Speed: ${angin} m/s`;
          }
        };

        datas.send();
      }
    </script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/js/all.min.js"
      integrity="sha512-uKQ39gEGiyUJl4AI6L+ekBdGKpGw4xJ55+xyJG7YFlJokPNYegn9KwQ3P8A7aFQAUtUsAQHep+d/lrGqrbPIDQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
